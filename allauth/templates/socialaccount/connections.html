{% extends "socialaccount/base.html" %}

{% load i18n %}
{% load url from future %}
{% load account %}
{% load socialaccount %}
{% providers_media_js %}

{% block head_title %}{% trans "Account Connections" %}{% endblock %}

{% block content %}
<h1 class="text-center">Connected Accounts</h1>

{% if form.accounts %}

<div class="row text-center">
<form method="post" action="{% url 'socialaccount_connections' %}">
{% csrf_token %}

<fieldset>
{% if form.non_field_errors %}
<div id="errorMsg">{{form.non_field_errors}}</div>
{% endif %}

{% for base_account in form.accounts %}
{% with base_account.get_provider_account as account %}
<label for="id_account_{{base_account.id}}">
<input id="id_account_{{base_account.id}}" type="hidden" name="account" value="{{base_account.id}}" />
        <button onclick="myFunction()" class=" btn btn-block btn-social btn-danger socialaccount_provider{{base_account.provider}} {{account.get_brand.id}}">
            <i class="fa fa-check"></i>{{account.get_brand.name}}: {{account}}</button>
</label>
{% endwith %}
{% endfor %}

</fieldset>

</form>
    </div>

{% else %}
<p>{% trans 'You currently have no social network accounts connected to this account.' %}</p>
{% endif %}
    <p class="text-center">{% blocktrans %}For a better user experience you can connect your social accounts:{% endblocktrans %}</p>


        <div class="social-login" style="padding-top: 40px">
        <div class="row col-lg-4 col-md-offset-4">
            <a href="{% provider_login_url "facebook" process="connect" method="oauth2"%}" class="btn btn-block btn-social btn-facebook"><i class="fa fa-facebook"></i> Connect Facebook</a>
        </div>
        <div class="row col-lg-4 col-md-offset-4" style="padding-top: 10px">
            <a href="{% provider_login_url "spotify" process="connect" %}" class="btn btn-block btn-social btn-github"><i class="fa fa-spotify"></i> Connect Spotify</a>
        </div>
        <div class="row col-lg-4 col-md-offset-4" style="padding-top: 10px">
            <a href="{% provider_login_url "google" process="connect" %}" class="btn btn-block btn-social btn-google-plus"><i class="fa fa-youtube"></i> Connect Google & Youtube</a>
        </div>
        <div class="row col-lg-4 col-md-offset-4" style="padding-top: 10px">
            <a href="{% provider_login_url "instagram" process="connect" %}" class="btn btn-block btn-social btn-instagram"><i class="fa fa-instagram"></i> Connect Instagram</a>
        </div>
    </div>

    <script>
function myFunction() {
    var x = document.getElementById("id_account_{{base_account.id}}").value;
}
</script>

{% endblock %}
